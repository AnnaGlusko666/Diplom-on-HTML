:root{
  --bg:#eef3f8;
  --card:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;
  --border:#e5e7eb;

  --green:#31c26b;
  --purple:#8e55c7;
  --blue:#4e78a8;

  --shadow: 0 14px 30px rgba(15,23,42,.10);
  --radius:16px;
}

*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
.hidden{display:none!important}
.w100{width:100%}
.center{text-align:center}
.small{font-size:12px}
.muted{color:var(--muted)}
.row{display:flex;align-items:center}
.gap{gap:12px}
.wrap{flex-wrap:wrap}

.page{max-width:1200px;margin:0 auto;padding:22px 18px}

.public-header{padding:24px 18px 8px;text-align:center}
.public-title{font-size:48px;font-weight:900;color:#5e86b6}
.public-subtitle{margin-top:6px;color:#1f2937;opacity:.85}

.public-screen{padding:12px 0}
.center-title{font-size:26px;text-align:center;margin:10px 0 6px}
.center-subtitle{text-align:center;color:var(--muted);margin:0 0 18px}

.role-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:10px}
.role-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:26px;text-align:center}
.role-icon{width:64px;height:64px;border-radius:18px;display:grid;place-items:center;margin:0 auto 10px;font-size:28px}
.role-icon.green{background:rgba(49,194,107,.12);color:var(--green)}
.role-icon.purple{background:rgba(142,85,199,.12);color:var(--purple)}
.role-list{list-style:none;padding:0;margin:16px 0 18px;text-align:left}
.role-list li{margin:10px 0;padding-left:18px;position:relative;color:#111827}
.role-list li::before{content:"✓";position:absolute;left:0;top:0;color:var(--green);font-weight:700}

.center-actions{margin-top:18px;text-align:center}

.auth-card{max-width:560px;margin:0 auto;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}
.auth-head{padding:22px 24px;color:#fff;text-align:center}
.auth-head h2{margin:0 0 6px}
.auth-head p{margin:0;opacity:.9}
.auth-head.purple{background:var(--purple)}
.auth-head.blue{background:var(--blue)}
.auth-body{padding:22px 24px}

label{display:block;margin:14px 0 6px;color:#335b8a;font-weight:700}
input, select{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);outline:none;font-size:14px;background:#fff}
input:focus, select:focus{border-color:#93c5fd}

/* checkbox rows */
.chk{display:flex;gap:10px;align-items:center;margin:10px 0 0;color:var(--muted);font-weight:700}
.chk input{width:auto;padding:0;margin:0}

/* spacing helper */
.mt14{margin-top:14px!important}

.error{margin-top:12px;background:rgba(239,68,68,.10);border:1px solid rgba(239,68,68,.35);color:#991b1b;padding:10px 12px;border-radius:12px}

.btn{border:none;border-radius:12px;padding:12px 14px;cursor:pointer;font-weight:800;transition:.08s transform}
.btn:hover{transform:translateY(-1px)}
.btn-ghost{background:#f3f4f6;border:1px solid var(--border);color:#111827}
.btn-green{background:var(--green);color:#fff}
.btn-purple{background:var(--purple);color:#fff}

.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}

.modal{position:fixed;inset:0;background:rgba(15,23,42,.38);display:grid;place-items:center;padding:18px}
.modal-card{width:min(520px,92vw);background:#fff;border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow)}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
.modal-body{padding:16px}

.badge{background:rgba(255,255,255,.22);padding:4px 10px;border-radius:999px;font-size:12px;font-weight:800;color:#fff}
.badge.ghost{background:rgba(255,255,255,.14)}

.pill{background:#f59e0b;color:#fff;padding:8px 12px;border-radius:999px;font-weight:900;display:inline-flex;gap:8px;align-items:center}
.pill.coins{background:#f59e0b}
.pill.points{background:#f97316}
.pill.orange{background:#f59e0b}

.select{border-radius:12px;border:1px solid var(--border);padding:10px 12px;min-width:220px}

/* ===== TEACHER APP ===== */
.teacher-app{max-width:1200px;margin:0 auto;padding:10px 14px 22px}
.teacher-topbar{background:var(--blue);color:#fff;border-radius:16px 16px 0 0;padding:16px 18px;display:flex;align-items:center;justify-content:space-between}
.teacher-top-left{display:flex;gap:12px;align-items:center}
.teacher-logo{width:46px;height:46px;border-radius:999px;background:rgba(255,255,255,.16);display:grid;place-items:center;font-size:22px}
.teacher-app-title{font-weight:900;font-size:20px}
.teacher-user-line{display:flex;gap:8px;align-items:center;margin-top:4px;opacity:.95}
.teacher-top-right{display:flex;gap:10px;align-items:center}

.teacher-layout{display:grid;grid-template-columns:260px 1fr;background:#fff;border:1px solid var(--border);border-top:none;border-radius:0 0 16px 16px;box-shadow:var(--shadow);overflow:hidden}
.teacher-sidebar{background:#f8fafc;border-right:1px solid var(--border);padding:14px 10px}
.nav-item{width:100%;text-align:left;padding:12px 12px;border-radius:12px;border:1px solid transparent;background:transparent;cursor:pointer;font-weight:800;color:#111827;display:flex;gap:10px;align-items:center}
.nav-item:hover{background:#eef2ff}
.nav-item.active{background:#eaf0fb;border-color:#c7d2fe}
.teacher-content{padding:18px 18px 24px}

.content-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.content-head h2{margin:0}
.stack{display:flex;flex-direction:column;gap:12px}
.block-title{margin:18px 0 8px}

.table{width:100%;border-collapse:collapse;border:1px solid var(--border);border-radius:14px;overflow:hidden}
.table th,.table td{padding:10px 12px;border-bottom:1px solid var(--border);text-align:left}
.table th{background:#f8fafc;color:#475569}
.table tr:last-child td{border-bottom:none}

/* ===== STUDENT APP ===== */
.student-app{max-width:1200px;margin:0 auto;padding:10px 14px 22px}
.student-topbar{background:var(--blue);color:#fff;border-radius:16px 16px 0 0;padding:16px 18px;display:flex;align-items:center;justify-content:space-between}
.student-top-left{display:flex;gap:12px;align-items:center}
.student-logo{width:46px;height:46px;border-radius:999px;background:rgba(255,255,255,.16);display:grid;place-items:center;font-size:22px}
.student-app-title{font-weight:900;font-size:20px}
.student-user-line{display:flex;gap:10px;align-items:center;margin-top:4px;opacity:.95}
.stName{font-weight:900}
.student-top-right{display:flex;gap:10px;align-items:center}

.student-layout{display:grid;grid-template-columns:260px 1fr;background:#fff;border:1px solid var(--border);border-top:none;border-radius:0 0 16px 16px;box-shadow:var(--shadow);overflow:hidden}
.student-sidebar{background:#f8fafc;border-right:1px solid var(--border);padding:14px 10px}
.student-content{padding:18px 18px 24px}

/* KPI */
.kpi-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.kpi{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px}
.kpi-title{color:#6b7280;font-weight:800;font-size:13px}
.kpi-value{font-size:22px;font-weight:900;margin-top:6px;color:#1f4f8a}
.kpi-sub{font-size:12px;margin-top:6px}
.kpi-sub.green{color:#16a34a}

/* Recent grades list */
.card-head-blue{background:#5f88b6;color:#fff;font-weight:900;padding:12px 14px}
.grade-row{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-top:1px solid var(--border)}
.grade-left{display:flex;gap:12px;align-items:center}
.subj-ico{width:38px;height:38px;border-radius:999px;display:grid;place-items:center;color:#fff;font-weight:900}
.subj-ico.purple{background:#8e55c7}
.subj-ico.red{background:#ef4444}
.subj-ico.blue{background:#3b82f6}
.grade-title{font-weight:900}
.grade-sub{color:var(--muted);font-size:12px;margin-top:2px}
.grade-right{display:flex;gap:10px;align-items:center}

/* colored grade badges */
.grade-badge{width:34px;height:34px;border-radius:999px;color:#fff;font-weight:900;display:grid;place-items:center}
.grade-badge.green{background:#22c55e}
.grade-badge.blue{background:#3b82f6}
.grade-badge.red{background:#ef4444}

.grade-date{color:#111827;font-size:13px}

/* Grades blocks */
.subject-block{margin-top:14px;border-radius:14px;overflow:hidden;box-shadow:var(--shadow);border:1px solid var(--border)}
.subject-head{background:#5f88b6;color:#fff;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;font-weight:900}
.subject-body{background:#fff}
.subject-row{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-top:1px solid var(--border)}
.subject-mark{display:flex;gap:10px;align-items:center}

/* colored mark boxes */
.mark-box{width:28px;height:22px;border-radius:0;color:#fff;font-weight:900;display:grid;place-items:center;font-size:12px}
.mark-box.red{background:#ef4444}
.mark-box.blue{background:#3b82f6}
.mark-box.green{background:#22c55e}

.subject-note{font-size:13px}
.subject-meta{font-size:12px;color:#111827;opacity:.9}

/* Schedule */
.schedule-card{padding:0;overflow:hidden}
.schedule-tabs{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;padding:12px;background:#fff}
.daytab{border:1px solid var(--border);background:#f1f5f9;border-radius:10px;padding:10px;font-weight:900;cursor:pointer}
.daytab.active{border-color:#5f88b6;background:#eaf0fb}
.schedule-body{padding:14px;background:#fff;border-top:1px solid var(--border)}
.lesson{border:1px solid var(--border);border-radius:12px;padding:10px 12px;margin-top:10px;box-shadow:0 8px 18px rgba(15,23,42,.06)}
.lesson-time{color:#1f4f8a;font-weight:900;font-size:12px}
.lesson-subj{font-weight:900;margin-top:4px}
.lesson-room{color:var(--muted);font-size:12px;margin-top:2px}

/* Badges */
.badges-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
.badge-card{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:12px;text-align:center}
.badge-ico{width:58px;height:58px;border-radius:999px;background:#fff7ed;border:1px solid #fde68a;display:grid;place-items:center;margin:0 auto 8px;font-size:24px}
.badge-name{font-weight:900;font-size:13px}
.badge-desc{color:var(--muted);font-size:12px;margin-top:4px}
.badge-status{font-size:12px;margin-top:8px}
.badge-status.ok{color:#16a34a;font-weight:800}
.badge-status.no{color:#6b7280}
.badge-reward{margin-top:6px;color:#f59e0b;font-weight:900;font-size:12px}

.rare-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.rare-card{border-radius:14px;overflow:hidden;box-shadow:var(--shadow);border:1px solid #fbbf24;background:linear-gradient(135deg,#fb923c,#f472b6);padding:16px;color:#fff;position:relative}
.rare-title{font-weight:900}
.rare-desc{font-size:12px;opacity:.95;margin-top:6px}
.rare-status{margin-top:10px;font-size:12px;opacity:.95}
.rare-reward{margin-top:10px;font-weight:900}

/* Profile */
.profile-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.profile-card{background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:18px}
.avatar-wrap{position:relative;width:140px;margin:6px auto 10px}
.avatar-big{width:140px;height:140px;border-radius:999px;background:#5e86b6;display:grid;place-items:center;color:#fff;font-size:50px;margin:0 auto;box-shadow:0 12px 20px rgba(17,24,39,.16)}
.avatar-big.student{background:#5e86b6}
.avatar-btn{position:absolute;right:10px;bottom:10px;width:34px;height:34px;border-radius:999px;background:#22c55e;color:#fff;display:grid;place-items:center;cursor:pointer;border:3px solid #fff;box-shadow:0 10px 18px rgba(0,0,0,.12)}
.profile-name{font-size:28px;font-weight:900;text-align:center;margin-bottom:4px}

.collection-box{border:1px solid var(--border);border-radius:14px;padding:12px;background:#f8fafc;min-height:110px}
.collection-item{display:flex;gap:10px;align-items:center;padding:10px;border:1px solid var(--border);border-radius:12px;background:#fff;margin-top:10px}
.collection-item:first-child{margin-top:0}
.collection-ico{width:34px;height:34px;border-radius:12px;background:#eaf0fb;display:grid;place-items:center}
.collection-title{font-weight:900}
.collection-sub{font-size:12px;color:var(--muted);margin-top:2px}
.equip-list{margin-top:10px}
.equip-pill{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--border);background:#fff;padding:8px 10px;border-radius:999px;margin:6px 6px 0 0}
.equip-pill b{font-weight:900}

/* Shop */
.shop-tabs{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 10px}
.shop-tab{border:1px solid var(--border);background:#fff;border-radius:999px;padding:10px 14px;font-weight:900;cursor:pointer}
.shop-tab.active{border-color:#5f88b6;background:#eaf0fb}
.shop-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.shop-item{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px}
.shop-ico{font-size:28px}
.shop-title{font-weight:900;margin-top:8px}
.shop-desc{color:var(--muted);font-size:12px;margin-top:6px;min-height:32px}
.shop-buy{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
.price{font-weight:900;color:#f59e0b}
.buybtn{background:#22c55e;color:#fff;border:none;border-radius:12px;padding:10px 12px;font-weight:900;cursor:pointer}
.buybtn:disabled{opacity:.45;cursor:not-allowed}

/* switches (mvp) */
.setting{display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);border-radius:14px;padding:12px;margin-top:12px;background:#fff}
.setting-title{font-weight:900}
.switch{position:relative;display:inline-block;width:48px;height:26px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;inset:0;background:#e5e7eb;transition:.2s;border-radius:999px}
.slider:before{position:absolute;content:"";height:20px;width:20px;left:3px;top:3px;background:white;transition:.2s;border-radius:999px}
.switch input:checked + .slider{background:#22c55e}
.switch input:checked + .slider:before{transform:translateX(22px)}

/* === РАМКИ === */
.frame1 { border:4px solid gold; }
.frame2 { border:4px solid cyan; }
.frame3 { border:4px solid violet; }

/* === АВАТАР АНІМАЦІЇ === */
.pulse { animation:pulse 1.4s infinite; }
.float { animation:float 2s infinite; }
.glow { animation:glow 1.5s infinite; }

@keyframes pulse{
0%{transform:scale(1)}
50%{transform:scale(1.06)}
100%{transform:scale(1)}
}

@keyframes float{
0%{transform:translateY(0)}
50%{transform:translateY(-6px)}
100%{transform:translateY(0)}
}

@keyframes glow{
0%{box-shadow:0 0 5px #fff}
50%{box-shadow:0 0 20px #60a5fa}
100%{box-shadow:0 0 5px #fff}
}

#snowLayer span{
position:fixed;
top:-10px;
color:white;
font-size:14px;
animation:snow 5s linear infinite;
}

@keyframes snow{
to{transform:translateY(100vh)}
}


/* ===== Student profile cosmetics ===== */
@media (max-width: 980px){
  .profile-grid{grid-template-columns:1fr 1fr}
}
@media (max-width: 640px){
  .profile-grid{grid-template-columns:1fr}
}

/* Avatar frames */
.avatar-big.frame-gold{outline:6px solid #f59e0b; outline-offset:4px}
.avatar-big.frame-neon{outline:6px solid #22c55e; outline-offset:4px; box-shadow:0 0 0 4px rgba(34,197,94,22), 0 12px 20px rgba(17,24,39,16)}
.avatar-big.frame-silver{outline:6px solid #94a3b8; outline-offset:4px}

/* Avatar animations */
@keyframes avPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.04)}}
@keyframes avBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes avGlow{0%,100%{filter:drop-shadow(0 0 0 rgba(59,130,246,0))}50%{filter:drop-shadow(0 0 12px rgba(59,130,246,.55))}}

.avatar-big.anim-pulse{animation:avPulse 1.2s ease-in-out infinite}
.avatar-big.anim-bounce{animation:avBounce 0.9s ease-in-out infinite}
.avatar-big.anim-glow{animation:avGlow 1.4s ease-in-out infinite}

/* Winter theme */
body.theme-winter .student-topbar{background:linear-gradient(135deg,#4e78a8,#2563eb)}
body.theme-winter .student-sidebar{background:linear-gradient(180deg,#f8fafc,#eaf0fb)}
body.theme-winter .role-icon.green{background:rgba(147,197,253,18);color:#2563eb}

/* Snow overlay */
#snowLayer{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:9999;display:none}
#snowLayer.active{display:block}
.snowflake{position:absolute;top:-12px;opacity:.85;animation-name:snowFall;animation-timing-function:linear;animation-iteration-count:1}
@keyframes snowFall{to{transform:translate3d(var(--dx),110vh,0)}}




/* ===== Inline profile settings under avatar ===== */
.profile-settings-inline{
  margin-top:14px;
  border-top:1px solid var(--border);
  padding-top:14px;
}
.profile-settings-inline .setting{
  margin-top:12px;
}

/* ===== Profile grid (3 columns) ===== */
.profile-grid{
  display:grid;
  grid-template-columns: 1fr;
  gap:16px;
  align-items:start;
}

@media (min-width: 980px){
  .profile-grid{
    grid-template-columns: 420px 420px 1fr;
    gap:24px;
  }
}

/* Shop inline configuration after purchase */
.shop-config{
  margin-top:10px;
  padding-top:10px;
  border-top:1px solid var(--border);
  display:flex;
  flex-direction:column;
  gap:8px;
}

.shop-config .select{min-height:42px;}